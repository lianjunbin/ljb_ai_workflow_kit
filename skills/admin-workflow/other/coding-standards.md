---
description: "ç®¡ç†åå°ç¼–ç è§„èŒƒ - TSX + Vue åˆ†ç¦»æ¶æ„"
---

# ç¼–ç è§„èŒƒ

> æœ¬æ–‡æ¡£å®šä¹‰äº†ç®¡ç†åå°å¼€å‘çš„æ ¸å¿ƒç¼–ç è§„èŒƒï¼Œæ‰€æœ‰ä»£ç†åœ¨ç”Ÿæˆä»£ç æ—¶å¿…é¡»éµå¾ªã€‚

---

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„ï¼šTSX + Vue åˆ†ç¦»

### è®¾è®¡ç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TSX + Vue åˆ†ç¦»æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚      .tsx æ–‡ä»¶       â”‚     â”‚      .vue æ–‡ä»¶       â”‚           â”‚
â”‚  â”‚      (Model)        â”‚     â”‚      (View)         â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ â€¢ ä¸šåŠ¡é€»è¾‘          â”‚     â”‚ â€¢ æ¨¡æ¿æ¸²æŸ“          â”‚           â”‚
â”‚  â”‚ â€¢ çŠ¶æ€ç®¡ç†          â”‚â”€â”€â”€â”€â†’â”‚ â€¢ æ ·å¼å®šä¹‰          â”‚           â”‚
â”‚  â”‚ â€¢ æ•°æ®å¤„ç†          â”‚     â”‚ â€¢ äº‹ä»¶ç»‘å®š          â”‚           â”‚
â”‚  â”‚ â€¢ API è°ƒç”¨å°è£…      â”‚     â”‚ â€¢ ç»„ä»¶ç»„åˆ          â”‚           â”‚
â”‚  â”‚ â€¢ Hooks å¯¼å‡º        â”‚     â”‚ â€¢ Slots å®šä¹‰        â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â”‚  ä¼˜åŠ¿:                                                          â”‚
â”‚  âœ… é€»è¾‘ä¸è§†å›¾åˆ†ç¦»ï¼Œå•ä¸€èŒè´£                                     â”‚
â”‚  âœ… .tsx å¯ç‹¬ç«‹æµ‹è¯•                                              â”‚
â”‚  âœ… .vue æ›´ä¸“æ³¨äº UI è¡¨ç°                                        â”‚
â”‚  âœ… å¤æ‚é€»è¾‘ä¸æ±¡æŸ“æ¨¡æ¿                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–‡ä»¶ç»„ç»‡

```
src/views/user/
â”œâ”€â”€ detail/
â”‚   â”œâ”€â”€ index.vue              # View - é¡µé¢å…¥å£
â”‚   â”œâ”€â”€ useUserDetail.tsx      # Model - é¡µé¢é€»è¾‘
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ UserLogTable.vue   # View - å­ç»„ä»¶
â”‚   â”‚   â””â”€â”€ useUserLog.tsx     # Model - å­ç»„ä»¶é€»è¾‘
â”‚   â””â”€â”€ types.ts               # ç±»å‹å®šä¹‰
```

### ä»£ç ç¤ºä¾‹

**âŒ ä¸æ¨èï¼šé€»è¾‘æ··åœ¨ Vue ä¸­**

```vue
<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { getUserDetail, getUserLogs } from '@/api/user'

const loading = ref(false)
const userDetail = ref(null)
const logs = ref([])
const page = ref(1)
const pageSize = ref(20)
const total = ref(0)

const hasMore = computed(() => logs.value.length < total.value)

async function fetchUserDetail(id: string) {
  loading.value = true
  try {
    userDetail.value = await getUserDetail(id)
  } finally {
    loading.value = false
  }
}

async function fetchLogs(id: string) {
  const res = await getUserLogs(id, { page: page.value, pageSize: pageSize.value })
  logs.value = res.list
  total.value = res.total
}

// ... æ›´å¤šé€»è¾‘
</script>
```

**âœ… æ¨èï¼šTSX + Vue åˆ†ç¦»**

```tsx
// useUserDetail.tsx - Model å±‚
import { ref, computed } from 'vue'
import { getUserDetail, getUserLogs } from '@/api/user'
import type { UserDetail, OperationLog, PageParams } from './types'

export function useUserDetail(userId: string) {
  // çŠ¶æ€
  const loading = ref(false)
  const userDetail = ref<UserDetail | null>(null)

  // æ“ä½œ
  async function fetchDetail() {
    loading.value = true
    try {
      userDetail.value = await getUserDetail(userId)
    } finally {
      loading.value = false
    }
  }

  return {
    // è§£æ„å¯¼å‡º
    loading,
    userDetail,
    fetchDetail,
  }
}

export function useUserLog(userId: string) {
  const { logs, page, pageSize, total, loading, fetchLogs, hasMore } = useLogList(() =>
    getUserLogs(userId, { page: page.value, pageSize: pageSize.value })
  )

  return {
    logs,
    page,
    pageSize,
    total,
    loading,
    hasMore,
    fetchLogs,
  }
}
```

```vue
<!-- index.vue - View å±‚ -->
<script setup lang="ts">
import { useUserDetail, useUserLog } from './useUserDetail'
import UserLogTable from './components/UserLogTable.vue'

const props = defineProps<{ userId: string }>()

// è§£æ„èµ‹å€¼ï¼Œæ¸…æ™°æ˜äº†
const { loading, userDetail, fetchDetail } = useUserDetail(props.userId)
const { logs, page, pageSize, total, fetchLogs } = useUserLog(props.userId)

fetchDetail()
</script>

<template>
  <div class="user-detail">
    <UserInfo :user="userDetail" :loading="loading" />

    <UserLogTable
      :logs="logs"
      :loading="loading"
      v-model:page="page"
      v-model:pageSize="pageSize"
      :total="total"
      @refresh="fetchLogs"
    />
  </div>
</template>
```

---

## ğŸ“¦ è§£æ„èµ‹å€¼è§„èŒƒ

### åŸºæœ¬åŸåˆ™

1. **Hook è¿”å›å€¼å¿…é¡»ä½¿ç”¨è§£æ„èµ‹å€¼**
2. **Props æ¥æ”¶ä½¿ç”¨è§£æ„èµ‹å€¼**
3. **API å“åº”ä½¿ç”¨è§£æ„èµ‹å€¼**
4. **å¯¹è±¡å‚æ•°ä½¿ç”¨è§£æ„èµ‹å€¼**

### ç¤ºä¾‹

```tsx
// âœ… æ¨èï¼šHook è¿”å›è§£æ„
const { loading, data, error, refresh } = useRequest(fetchData)

// âœ… æ¨èï¼šAPI å“åº”è§£æ„
const { list, total, page } = await getPagedData(params)

// âœ… æ¨èï¼šProps è§£æ„
const { userId, readonly = false } = defineProps<{
  userId: string
  readonly?: boolean
}>()

// âœ… æ¨èï¼šå‡½æ•°å‚æ•°è§£æ„
function handlePageChange({ page, pageSize }: PageParams) {
  // ...
}

// âŒ ä¸æ¨èï¼šä¸è§£æ„
const result = useRequest(fetchData)
console.log(result.loading, result.data)
```

### é‡å‘½åè§£æ„

```tsx
// é¿å…å‘½åå†²çªæ—¶ä½¿ç”¨é‡å‘½å
const { data: userList, loading: userLoading } = useUserList()
const { data: roleList, loading: roleLoading } = useRoleList()
```

---

## ğŸ¨ æ ·å¼è§„èŒƒ

### åŸºæœ¬åŸåˆ™

1. **ä¼˜å…ˆä½¿ç”¨ pix-component ç»„ä»¶æ ·å¼**
2. **é‡åˆ°è®¾è®¡ä¸ä½³æ—¶ï¼Œå‚è€ƒ ui-ux-pro-max æ€è·¯ä¼˜åŒ–**
3. **ä½¿ç”¨ CSS å˜é‡ä¿æŒä¸€è‡´æ€§**
4. **å“åº”å¼è®¾è®¡ä¼˜å…ˆ**

### ui-ux-pro-max æ€è·¯åº”ç”¨åœºæ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ ä½•æ—¶é‡‡ç”¨ ui-ux-pro-max æ€è·¯ï¼Ÿ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  âœ… é€‚ç”¨åœºæ™¯ï¼š                                                â”‚
â”‚     â€¢ åŸè®¾è®¡è§†è§‰å±‚æ¬¡ä¸æ¸…æ™°                                   â”‚
â”‚     â€¢ ä¿¡æ¯å¯†åº¦è¿‡é«˜ï¼Œç”¨æˆ·éš¾ä»¥å¿«é€Ÿè·å–å…³é”®ä¿¡æ¯                  â”‚
â”‚     â€¢ äº¤äº’åé¦ˆä¸æ˜ç¡®ï¼ˆhoverã€activeã€disabled çŠ¶æ€ï¼‰         â”‚
â”‚     â€¢ ç©ºçŠ¶æ€ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯çŠ¶æ€å¤„ç†ä¸å½“                      â”‚
â”‚     â€¢ è¡¨å•å¸ƒå±€æ‚ä¹±ï¼Œè§†è§‰å¼•å¯¼ä¸è¶³                              â”‚
â”‚                                                              â”‚
â”‚  ğŸ¯ ä¼˜åŒ–æ–¹å‘ï¼š                                                â”‚
â”‚     â€¢ ä½¿ç”¨å¡ç‰‡å¸ƒå±€å¢å¼ºè§†è§‰åˆ†ç»„                                â”‚
â”‚     â€¢ æ·»åŠ é€‚å½“çš„é—´è·å’Œåˆ†éš”çº¿                                  â”‚
â”‚     â€¢ ä½¿ç”¨å›¾æ ‡å’Œé¢œè‰²å¢å¼ºä¿¡æ¯å±‚æ¬¡                              â”‚
â”‚     â€¢ æ·»åŠ è¿‡æ¸¡åŠ¨ç”»æå‡äº¤äº’ä½“éªŒ                                â”‚
â”‚     â€¢ ä¼˜åŒ–å“åº”å¼æ–­ç‚¹                                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ·å¼ç¤ºä¾‹

```vue
<style scoped lang="scss">
// ä½¿ç”¨ CSS å˜é‡ä¿æŒä¸€è‡´æ€§
.user-detail {
  padding: var(--spacing-lg);

  // å¡ç‰‡å¼å¸ƒå±€
  &__card {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);

    // ä¼˜é›…çš„è¿‡æ¸¡æ•ˆæœ
    transition: box-shadow 0.2s ease;

    &:hover {
      box-shadow: var(--shadow-md);
    }
  }

  // å“åº”å¼é€‚é…
  @media (max-width: 768px) {
    padding: var(--spacing-sm);
  }
}
</style>
```

---

## ğŸ“ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å

| ç±»å‹ | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| Vue ç»„ä»¶ | PascalCase | `UserLogTable.vue` |
| TSX Hook | camelCase + useå‰ç¼€ | `useUserDetail.tsx` |
| ç±»å‹å®šä¹‰ | camelCase | `types.ts` |
| å·¥å…·å‡½æ•° | camelCase | `formatDate.ts` |

### Hook å‘½å

```tsx
// âœ… æ¨èï¼šuse + åè¯/åŠ¨è¯
useUserDetail()    // è·å–ç”¨æˆ·è¯¦æƒ…
useUserLog()       // è·å–ç”¨æˆ·æ—¥å¿—
usePagedList()     // åˆ†é¡µåˆ—è¡¨é€»è¾‘
useForm()          // è¡¨å•é€»è¾‘
useDialog()        // å¼¹çª—æ§åˆ¶

// âŒ ä¸æ¨è
getUserDetailHook()  // ä¸éœ€è¦ Hook åç¼€
user()              // ç¼ºå°‘ use å‰ç¼€
```

### è§£æ„å¯¼å‡ºå‘½å

```tsx
// âœ… æ¨èï¼šè¯­ä¹‰åŒ–å‘½å
return {
  // çŠ¶æ€
  loading,
  userDetail,

  // è®¡ç®—å±æ€§
  hasPermission,
  displayName,

  // æ–¹æ³•ï¼ˆåŠ¨è¯å¼€å¤´ï¼‰
  fetchDetail,
  updateUser,
  deleteUser,
}
```

---

## ğŸ”„ ä»£ç å®¡æŸ¥æ£€æŸ¥é¡¹

code-reviewer åœ¨å®¡æŸ¥æ—¶ä¼šæ£€æŸ¥ï¼š

### TSX + Vue åˆ†ç¦»

- [ ] å¤æ‚é€»è¾‘æ˜¯å¦æŠ½ç¦»åˆ° .tsx æ–‡ä»¶
- [ ] .vue æ–‡ä»¶æ˜¯å¦åªå…³æ³¨è§†å›¾å±‚
- [ ] Hook æ˜¯å¦æ­£ç¡®å¯¼å‡ºå’Œä½¿ç”¨

### è§£æ„èµ‹å€¼

- [ ] Hook è¿”å›å€¼æ˜¯å¦ä½¿ç”¨è§£æ„
- [ ] Props æ˜¯å¦ä½¿ç”¨è§£æ„
- [ ] API å“åº”æ˜¯å¦ä½¿ç”¨è§£æ„

### æ ·å¼è§„èŒƒ

- [ ] æ˜¯å¦ä¼˜å…ˆä½¿ç”¨ pix-component
- [ ] è§†è§‰å±‚æ¬¡æ˜¯å¦æ¸…æ™°
- [ ] æ˜¯å¦ä½¿ç”¨ CSS å˜é‡
- [ ] æ˜¯å¦è€ƒè™‘å“åº”å¼

---

## ğŸ“š å‚è€ƒèµ„æº

- [Vue 3 Composition API](https://vuejs.org/guide/extras/composition-api-faq.html)
- [TSX in Vue](https://vuejs.org/guide/extras/render-function.html)
- [pix-component ç»„ä»¶åº“](å†…éƒ¨æ–‡æ¡£)
- [ui-ux-pro-max Skill](Claude Code å†…ç½®)
