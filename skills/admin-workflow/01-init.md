---
description: "初始化项目的 OpenSpec 结构和工作流配置"
---

# /admin:init - 项目初始化

执行此命令时，按以下流程输出：

---

## 阶段卡片

```
┌─────────────────────────────────────────────────────────────────┐
│  🎬 INIT · 项目初始化                                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📝 这一步做什么？                                               │
│     检测你的项目用了什么技术栈（Vue 3？TypeScript？），          │
│     然后生成工作流需要的配置文件                                 │
│                                                                 │
│  ⏱️ 预计耗时：< 1 分钟                                           │
│                                                                 │
│  💡 小贴士：                                                     │
│     • 这一步只需要做一次                                         │
│     • 已有配置？会问你要不要覆盖                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 执行步骤

### Step 1: 检测技术栈

```
🔍 正在检测项目技术栈...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✅ 框架: Vue 3.4.21
  ✅ 构建: Vite 5.1.4
  ✅ 语言: TypeScript 5.3.3
  ✅ 状态管理: Pinia 2.1.7
  ✅ UI 组件库: pix-component 2.3.0

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**识别规则：**
- `vite.config.ts` + `vue` 依赖 → Vue 3 + Vite
- `nuxt.config.ts` → Nuxt 3
- `vue.config.js` → Vue 2 + Vue CLI
- `tsconfig.json` → TypeScript 项目

### Step 2: 检查现有配置

```
🔍 检查现有配置...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ⚠️ 发现已有配置文件

  📂 openspec/project.md (2024-02-10 创建)

┌──────────────────────────────────────────────┐
│ 🤔 要覆盖现有配置吗？                         │
│                                              │
│    [Y] 是，用新配置覆盖                       │
│    [N] 否，保留现有配置                       │
│    [D] 查看差异                               │
└──────────────────────────────────────────────┘
```

### Step 3: 生成配置文件

```
📂 生成配置文件...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✅ openspec/project.md          项目配置
  ✅ openspec/workflow.config.json 工作流配置
  ✅ openspec/AGENTS.md            代理配置
  ✅ openspec/changes/archive/INDEX.md  归档索引

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Step 4: 检测 MCP 服务

```
🔌 检测 MCP 服务...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✅ mcp__jira          已配置，可获取 Jira 需求
  ⚠️ mcp__apifox        未配置（可选，用于获取 API 文档）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 Apifox 是可选的，不配置也能正常使用工作流
```

---

## 完成输出

```
┌──────────────────────────────────────────────┐
│ ✅ 初始化完成！                               │
│    项目已准备好使用管理后台 AI 开发工作流      │
└──────────────────────────────────────────────┘

📊 配置摘要
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  技术栈: Vue 3 + Vite + TypeScript
  组件库: pix-component
  MCP:   Jira ✅  Apifox ⚠️

  生成文件:
  └── openspec/
      ├── project.md
      ├── workflow.config.json
      ├── AGENTS.md
      └── changes/archive/INDEX.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💬 接下来怎么做？

   👉 输入: /admin:start PIX-8456

   把 PIX-8456 换成你的 Jira Issue Key

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⌨️ 快捷提示：输入 /admin 随时查看工作流全貌
```

---

## 参数

| 参数 | 描述 | 默认值 |
|------|------|--------|
| `--force` | 强制覆盖现有配置，不询问 | false |
| `--template` | 使用指定模板（admin/custom） | admin |

---

## 示例

```bash
# 标准初始化
/admin:init

# 强制覆盖（不询问）
/admin:init --force

# 使用自定义模板
/admin:init --template custom
```

---

## 生成的配置文件

### openspec/project.md

```markdown
# 项目配置

## 技术栈
- 框架: Vue 3 + Vite
- 语言: TypeScript
- 状态管理: Pinia
- UI 组件库: pix-component

## 编码规范
- 遵循 frontend-standards 技能规范
- 组件命名: PascalCase
- 文件命名: kebab-case

## pix-component 组件使用指南
- 优先使用组件库中的组件
- 自定义组件需继承组件库样式变量
- 表单使用 PixForm 系列组件
- 表格使用 PixTable 组件
```

### openspec/workflow.config.json

```json
{
  "version": "1.1",
  "preset": "standard",
  "stages": {
    "design": {
      "thinkMode": "think",
      "agents": 1
    }
  }
}
```
